# ИДЗ №4. Татаров Константин Манолисович БПИ 228
**Варинат 12. Работа выполнена на 7 баллов\
Условие задания:**

Задача о супермаркете. В супермаркете работают два кассира,
покупатели заходят в супермаркет, делают покупки и становятся в очередь к случайному кассиру. Пока очередь пустая, кассир «спит». Как только появляется покупатель, кассир «просыпается».
Покупатель ожидает в очереди, пока не подойдет к кассиру. Очереди имеют ограниченную длину N. Если она длиннее, то покупатель
не встает ни в одну из очередей и уходит. Если одна из очередей
заполнена, то покупатель встает в другую.
Создать многопроцессное приложение, моделирующее рабочий день супермаркета.
Каждый покупатель и кассиры задаются отдельными процессами.


```
Первая программа на 4-5 балла:
Исходные сущности и их отображение
Покупатели:

Покупатели представлены клиентскими программами, которые отправляют запросы на сервер для добавления себя в очередь к кассирам.
Кассиры:

Кассиры представлены отдельными клиентскими программами, которые подключаются к серверу и обрабатывают покупателей из своей очереди.
Сервер:

Сервер управляет распределением покупателей между очередями кассиров и следит за состоянием очередей.
Поведение и взаимодействие
Запуск сервера:

Сервер запускается и начинает ожидать подключения кассиров и получения сообщений от покупателей.
Сервер использует UDP-сокет для приема и отправки сообщений.
Подключение кассиров:

Кассиры запускаются и отправляют серверу сообщение о своем подключении.
Сервер сохраняет адреса кассиров для последующей отправки сообщений о добавлении покупателей и их обработке.
Появление покупателей:

Клиентская программа покупателя генерирует покупателя и отправляет серверу сообщение с идентификатором покупателя.
Сервер проверяет очереди кассиров и добавляет покупателя в менее загруженную очередь или в случайную очередь, если они равны.
Если обе очереди заполнены, сервер отправляет покупателю сообщение о том, что он ушел из-за переполнения очередей.
Обработка очередей кассирами:

Каждая программа кассира в отдельном потоке постоянно проверяет свою очередь на наличие покупателей.
Если очередь не пуста, кассир извлекает покупателя из очереди, обрабатывает его и отправляет сообщение серверу о начале обработки.
Обработка занимает некоторое время (моделируется с помощью функции sleep).
Обмен сообщениями:

Все взаимодействия между сервером и клиентами происходят через UDP-сообщения.
Сервер отправляет кассирам сообщения о новых покупателях и их обработке.
Клиенты (кассиры и покупатели) отправляют серверу сообщения о своих действиях и получают от него уведомления.
```

[Результаты работы программы](https://github.com/kkkkkostya/system-arch-hse/blob/6758d2545c7ba973a7476b60c2e75396e13dbebb/idz_os_4/prog4/idz4-5.png)


```
Программа на 6-7 баллов:
Для мониторинга состояния системы и отображения комплексной информации о работе приложения, создадим отдельный клиент, который будет подключаться к серверу и получать данные о состоянии очередей и обработке клиентов.

Описание
Мониторинг-сервер (monitor_client.c):

Подключается к серверу и получает сообщения о состоянии системы.
Отображает сообщения, переданные сервером, в реальном времени.
Сервер (server.c):

Добавлена поддержка клиента мониторинга.
Сервер отправляет сообщения клиенту мониторинга о состоянии очередей и обработке клиентов.
Кассиры и покупатели:

Обновлены для взаимодействия с сервером, как и в предыдущем примере.
```

[Результаты работы программы](https://github.com/kkkkkostya/system-arch-hse/blob/e85a9067505c6741809ef62bc3bbd6230333854f/idz_os_4/prog6/idz6-7.png)
